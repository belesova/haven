<?xml version="1.0" encoding="iso-8859-2"?>
<source>
   <component>FrameLink Cutter: Cut Data</component>

   <authors>
      <author login="xpriby12">Bronislav Pribyl</author>
   </authors>

   <features>
      <item>Provides dedicated interface for data cut from the frame.</item>
   </features>
   
   <!-- Bugs -->
   <!-- <bugs>
   </bugs> -->
   
   <!-- What have to be done -->
   <todo>
      <item>Test component in HW.</item>
   </todo>


   <description>
			Cut Data is relatively autonomous module driven part- and word-counter (cnt_part, cnt_word)
			and FSM Transmit. It waits for designated data in the frame and copies it into register array.
			It does NOT look after valid signal, which is handled by FSM Valid.
   </description>
   
   <interface>
   		<generic_map>
   		
         <generic name="DATA_WIDTH" type="integer" default="32">
		        Data width of FrameLink frames.
         </generic>
         
		     <generic name="DATA_BYTES" type="integer" default="4">
		        Width of data bus in bytes.
         </generic>
         
         <generic name="PART" type="integer" default="0">
		        Number of frame part processed to extraction (0 = first frame part).
         </generic>
         
         <generic name="MAX_PARTS" type="integer" default="4">
		        Maximal number of frameparts. Needed for some interface signal width specification.
         </generic>
         
         <generic name="MAX_PART_SIZE" type="integer" default="512">
		        Maximal size of framepart in bytes. Needed for some interface signal width specification.
         </generic>
         
         <generic name="OFFSET" type="integer" default="0">
			      Position of first extracted byte from SOP (0 = first byte).
         </generic>
         
         <generic name="SIZE" type="integer" default="1">
		        Size of block of extracted data in bytes. Must be greater than 0.
         </generic>
         
      </generic_map>
      
      <port_map>
                
         <port name="CLK" dir="in" width="1">
            Clock.
         </port>
         
         
         <port name="DATA" dir="in" width="DATA_WIDTH">
            Input framelink data (RX).
         </port>
         
         <port name="PART_NUM" dir="in" width="log2(MAX_PARTS)">
            Serial number of currently processed framepart.
         </port>
         
         <port name="WORD_NUM" dir="in" width="log2(MAX_PART_SIZE / DATA_BYTES)">
            Serial number of currently processed word in the framepart.
         </port>
         
         <port name="TRANSMIT_PROGRESS" dir="in" width="1">
            Indicates transmit on RX port in progress. Generated by FSM transmit.
         </port>
         
         
         <port name="CUT_DATA" dir="out" width="8*SIZE">
            Data cut from each frame.
         </port>
          
       </port_map>
    </interface>
       
<body>
	<h1>Schemes</h1>
   <p>
      <obr src="./fig/cut_data.fig" mag="1.0">Cut Data</obr>
   </p>
</body>

</source>
